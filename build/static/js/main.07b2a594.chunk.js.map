{"version":3,"sources":["services/Service.js","components/Numbers.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Numbers","person","setMessage","name","number","onClick","e","window","confirm","personService","catch","error","setTimeout","location","reload","console","log","Notification","message","errorType","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","Filter","props","value","filterName","onChange","handleFilterNameChange","PersonForm","p","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","type","Persons","persons","map","includes","App","useState","setPersons","setNumber","setNewName","setFilterName","setErrorType","useEffect","initialPersons","target","personValue","filter","personObject","length","preventDefault","returnedPerson","newPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.07b2a594.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\n// eslint-disable-next-line\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n// eslint-disable-next-line\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\n// eslint-disable-next-line\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n// eslint-disable-next-line\r\nexport default { getAll, create, update, deletePerson };\r\n","import React from \"react\";\r\nimport personService from \"../services/Service\";\r\n\r\nconst Numbers = ({ person, setMessage }) => {\r\n  const test = (e) => {\r\n    window.confirm(`Delete ${person.name} ?`)\r\n      ? personService\r\n          .deletePerson(person.id)\r\n          .catch((error) => {\r\n            setMessage(`Testing ${error}`);\r\n            setTimeout(() => {\r\n              setMessage(null);\r\n            }, 5000);\r\n          })\r\n          .then(window.location.reload())\r\n      : console.log(\"is not delete\");\r\n  };\r\n\r\n  return (\r\n    <p>\r\n      {person.name} {person.number} <button onClick={test}>delete</button>\r\n    </p>\r\n  );\r\n};\r\n\r\nexport default Numbers;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message, errorType }) => {\r\n  if (message === null) {\r\n    return null;\r\n  } else {\r\n    if (errorType !== \"Error\") {\r\n      return (\r\n        <div\r\n          style={{\r\n            color: \"green\",\r\n            background: \"lightgrey\",\r\n            fontSize: \"20px\",\r\n            borderStyle: \"solid\",\r\n            borderRadius: \"5px\",\r\n            padding: \"10px\",\r\n            marginBottom: \"10px\",\r\n          }}\r\n        >\r\n          {message}\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div\r\n          style={{\r\n            color: \"red\",\r\n            background: \"lightgrey\",\r\n            fontSize: \"20px\",\r\n            borderStyle: \"solid\",\r\n            borderRadius: \"5px\",\r\n            padding: \"10px\",\r\n            marginBottom: \"10px\",\r\n          }}\r\n        >\r\n          {message}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\nimport Numbers from \"./components/Numbers\";\nimport Notification from \"./components/Notification\";\nimport personService from \"./services/Service\";\n\nconst Filter = (props) => {\n  return (\n    <div>\n      <form>\n        filter shown with{\" \"}\n        <input\n          value={props.filterName}\n          onChange={props.handleFilterNameChange}\n        />\n      </form>\n    </div>\n  );\n};\n\nconst PersonForm = (p) => {\n  return (\n    <form onSubmit={p.addPerson}>\n      <div>\n        name: <input value={p.newName} onChange={p.handleNameChange} />\n      </div>\n      <div>\n        number: <input value={p.newNumber} onChange={p.handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nconst Persons = (p) => {\n  return (\n    <div>\n      {p.persons.map((person) =>\n        person.name.includes(p.filterName) ? (\n          <Numbers key={person.id} person={person} setMessage={p.setMessage} />\n        ) : (\n          <p></p>\n        )\n      )}\n    </div>\n  );\n};\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newNumber, setNumber] = useState(\"\");\n  const [newName, setNewName] = useState(\"\");\n  const [filterName, setFilterName] = useState(\"\");\n  const [message, setMessage] = useState(null);\n  const [errorType, setErrorType] = useState(\"\");\n  console.log(errorType);\n  useEffect(() => {\n    personService\n      .getAll()\n      .then((initialPersons) => {\n        setPersons(initialPersons);\n      })\n      .catch((error) => {\n        setMessage(`Number of ${error} changed`);\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n      });\n  }, []);\n\n  const handleFilterNameChange = (e) => {\n    setFilterName(e.target.value);\n  };\n\n  const addPerson = (e) => {\n    if (errorType === \"Error\") {\n      setErrorType(\"\");\n    }\n    const personValue = persons.filter((person) => person.name === newName);\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    };\n    // console.log(personObject);\n    // console.log(personValue[0].id);\n    if (persons.filter((person) => person.name === newName).length > 0) {\n      e.preventDefault();\n\n      window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      )\n        ? personService\n            .update(personValue[0].id, personObject)\n            .then((returnedPerson) => {\n              setPersons(\n                persons.map((person) =>\n                  person.id !== personValue[0].id ? person : returnedPerson\n                )\n              );\n              setMessage(`Number of ${returnedPerson.name} changed`);\n              setTimeout(() => {\n                setMessage(null);\n              }, 5000);\n            })\n            .catch((error) => {\n              setErrorType(\"Error\");\n              setMessage(\n                `Information of ${newName} has already been removed from server `\n              );\n              setTimeout(() => {\n                setMessage(null);\n              }, 5000);\n            })\n        : console.log(\"Cancelled\");\n    } else {\n      e.preventDefault();\n      const personObject = {\n        name: newName,\n        number: newNumber,\n      };\n      personService.create(personObject).then((newPerson) => {\n        setPersons(persons.concat(newPerson));\n        setMessage(`Added ${newPerson.name}`);\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n        setNewName(\"\");\n        setNumber(\"\");\n      });\n      console.log(personObject);\n    }\n  };\n\n  const handleNumberChange = (e) => {\n    setNumber(e.target.value);\n  };\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n  // console.log(persons.filter((person) => person.name === newName));\n  // console.log(newNumber);\n  // console.log(newName);\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} errorType={errorType} />\n      <Filter\n        filterName={filterName}\n        handleFilterNameChange={handleFilterNameChange}\n      />\n\n      <h2>Add a new</h2>\n\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n\n      <h2>Numbers</h2>\n\n      <Persons\n        persons={persons}\n        filterName={filterName}\n        setMessage={() => setMessage()}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App.js\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}